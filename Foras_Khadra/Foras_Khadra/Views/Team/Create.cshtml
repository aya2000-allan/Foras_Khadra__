@model Foras_Khadra.ViewModels.TeamMemberCreateViewModel
@{
    ViewData["Title"] = "إضافة عضو جديد";
}

<link rel="stylesheet" href="~/css/team-create.css" />

<h2 class="page-title">إضافة عضو جديد</h2>

<div class="page-wrapper">


    <!-- Form panel -->
    <div class="form-panel">


        <div asp-validation-summary="All" class="validation-summary"></div>

        <form asp-action="Create" method="post" enctype="multipart/form-data">

            <!-- Upload box -->
            <div class="upload-box">
                <h3 class="discription">رفع صورة العضو</h3>
                <label class="upload-area">
                    <input asp-for="ImageFile" id="imageInput" type="file" accept=".jpg,.jpeg,.png,.mp4,.mov" hidden />
                    <div class="upload-icon">
                        <img src="~/images/upload-icon.svg" alt="Upload Icon" />
                    </div>
                    <p style="text-decoration: underline; color: goldenrod">
                        Drag & drop files or Browse
                    </p>
                    <small>Supported formats: JPEG, PNG, MP4, MOV</small>
                </label>

                <!-- Preview Image -->
                <div id="previewContainer" style="margin-top:15px; display:none;">
                    <img id="imagePreview" style="max-width:200px; border-radius:12px;" />
                    <p style="color:green; margin-top:8px;">✔ تم رفع الصورة بنجاح</p>
                </div>

                <span asp-validation-for="ImageFile" class="text-danger"></span>
            </div>

            <!-- Name -->
            <div class="field">
                <h3 class="discription">الاسم بالعربية</h3>
                <input asp-for="NameAr" placeholder="اسم العضو بالعربي" />
                <span asp-validation-for="NameAr" class="text-danger"></span>
            </div>

            <div class="field">
                <h3 class="discription">الاسم بالإنجليزية</h3>
                <input asp-for="NameEn" placeholder="اسم العضو بالانجليزي" />
                <span asp-validation-for="NameEn" class="text-danger"></span>
            </div>

            <div class="field">
                <h3 class="discription">الاسم بالفرنسي</h3>
                <input asp-for="NameFr" placeholder="اسم العضو بالفرنسي" />
                <span asp-validation-for="NameFr" class="text-danger"></span>
            </div>

            <!-- Gender -->
            <h3 class="discription">اختر جنس العضو</h3>
            <div class="field dropdown">

                <select asp-for="Gender"
                        asp-items="Html.GetEnumSelectList<Foras_Khadra.Models.GenderType>()">
                    <option value="">اختر جنس العضو</option>
                </select>
                <span asp-validation-for="Gender" class="text-danger"></span>
                <img src="~/images/lets-icons_arrow-drop-down.svg" alt="Drop-down arrow" class="custom-dropdown-arrow" />

            </div>

            <!-- Membership -->
            <h3 class="discription">اختر نوع العضوية</h3>
            <div class="field dropdown">

                <select asp-for="Membership"
                        asp-items="Html.GetEnumSelectList<Foras_Khadra.Models.MembershipType>()" >
                    <option value="">اختر نوع العضوية</option>
                </select>
                <span asp-validation-for="Membership" class="text-danger"></span>               
                <img src="~/images/lets-icons_arrow-drop-down.svg" alt="Drop-down arrow" class="custom-dropdown-arrow" />

            </div> 

            <!-- Department -->
            <h3 class="discription">اختر القسم</h3>
            <div class="field dropdown">
                <select asp-for="Department"
                        asp-items="Html.GetEnumSelectList<Foras_Khadra.Models.Department>()">
                    <option value="">اختر القسم</option>
                </select>
                <span asp-validation-for="Department" class="text-danger"></span>
                <img src="~/images/lets-icons_arrow-drop-down.svg" alt="Drop-down arrow" class="custom-dropdown-arrow" />

            </div>

            <!-- Bio -->
            <div class="field">
                <h3 class="discription">البيو بالعربي</h3>

                <!-- Quill editor -->
                <div id="editorAr" style="height: 376px;"></div>

                <!-- Hidden input bound to Model -->
                <input type="hidden" asp-for="BioAr" id="BioAr" />

                <span asp-validation-for="BioAr" class="text-danger"></span>
            </div>

            <div class="field">
                <h3 class="discription">البيو بالانجليزي</h3>

                <!-- Quill editor -->
                <div id="editorEn" style="height: 376px;"></div>

                <!-- Hidden input bound to Model -->
                <input type="hidden" asp-for="BioEn" id="BioEn" />

                <span asp-validation-for="BioEn" class="text-danger"></span>
            </div>


            <div class="field">
                <h3 class="discription">البيو بالفرنسي</h3>

                <!-- Quill editor -->
                <div id="editorFr" style="height: 376px;"></div>

                <!-- Hidden input bound to Model -->
                <input type="hidden" asp-for="BioFr" id="BioFr" />

                <span asp-validation-for="BioFr" class="text-danger"></span>
            </div>


            <!-- Actions -->
            <div class="actions">
                <button type="submit" class="btn-primary">حفظ وإضافة</button>
                <a asp-action="Index" class="btn-outline">إلغاء</a>
            </div>

        </form>
    </div>

    <!-- Left decorative panel -->
    <div class="side-panel">
        <div class="side-bg"></div>
        <div class="side-illustration">
            <!-- optional illustration image -->
            <img src="~/images/contact_illustration.svg" alt="">
        </div>
    </div>

</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    

}

<link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>

<script>
    // Arabic Editor (RTL)
    var quillAr = new Quill('#editorAr', {
        theme: 'snow',
        placeholder: 'نبذة عن العضو بالعربي',
        modules: {
            toolbar: [
                [{ header: [1, 2, false] }],
                ['bold', 'italic', 'underline'],
                [{ list: 'ordered' }, { list: 'bullet' }],
                ['link'],
                ['clean'],
                [{ direction: 'rtl' }],
                [{ align: [] }]
            ]
        }
    });
    quillAr.root.setAttribute('dir', 'rtl');


    // English Editor (LTR)
    var quillEn = new Quill('#editorEn', {
        theme: 'snow',
        placeholder: 'About the team member',
        modules: {
            toolbar: [
                [{ header: [1, 2, false] }],
                ['bold', 'italic', 'underline'],
                [{ list: 'ordered' }, { list: 'bullet' }],
                ['link'],
                ['clean']
            ]
        }
    });
    quillEn.root.setAttribute('dir', 'ltr');


    // French Editor (LTR)
    var quillFr = new Quill('#editorFr', {
        theme: 'snow',
        placeholder: 'À propos du membre',
        modules: {
            toolbar: [
                [{ header: [1, 2, false] }],
                ['bold', 'italic', 'underline'],
                [{ list: 'ordered' }, { list: 'bullet' }],
                ['link'],
                ['clean']
            ]
        }
    });
    quillFr.root.setAttribute('dir', 'ltr');


    // Copy content on submit
    document.querySelector('form').addEventListener('submit', function () {
        document.getElementById('BioAr').value = quillAr.root.innerHTML;
        document.getElementById('BioEn').value = quillEn.root.innerHTML;
        document.getElementById('BioFr').value = quillFr.root.innerHTML;
    });
</script>

<script>
    const imageInput = document.getElementById("imageInput");
    const previewContainer = document.getElementById("previewContainer");
    const imagePreview = document.getElementById("imagePreview");

    imageInput.addEventListener("change", function () {
        const file = this.files[0];

        if (file) {
            const reader = new FileReader();

            reader.onload = function (e) {
                imagePreview.setAttribute("src", e.target.result);
                previewContainer.style.display = "block";
            };

            reader.readAsDataURL(file);
        }
    });
</script>

